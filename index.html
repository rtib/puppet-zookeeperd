<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-zookeeperd">zookeeperd</h1>

<p><a href="https://travis-ci.org/rtib/puppet-zookeeperd"><img
src="https://travis-ci.org/rtib/puppet-zookeeperd.svg?branch=master"></a>
<a href="https://github.com/rtib/puppet-zookeeperd/issues"><img
src="https://img.shields.io/github/issues/rtib/puppet-zookeeperd.svg"></a>
<a
href="https://twitter.com/intent/tweet?text=Wow:&url=%5Bobject%20Object%5D"><img
src="https://img.shields.io/twitter/url/https/github.com/rtib/puppet-zookeeperd.svg?style=social"></a></p>

<h4 id="label-Table+of+Contents">Table of Contents</h4>
<ol><li>
<p><a href="#description">Description</a></p>
</li><li>
<p><a href="#setup">Setup - The basics of getting started with zookeeperd</a></p>
<ul><li>
<p><a href="#setup-requirements">Setup requirements</a></p>
</li><li>
<p><a href="#beginning-with-zookeeperd">Beginning with zookeeperd</a></p>
</li></ul>
</li><li>
<p><a href="#usage">Usage - Configuration options and additional
functionality</a></p>
</li><li>
<p><a href="#reference">Reference - An under-the-hood peek at what the module
is doing and how</a></p>
</li><li>
<p><a href="#limitations">Limitations - OS compatibility, etc.</a></p>
</li><li>
<p><a href="#development">Development - Guide for contributing to the
module</a></p>
</li></ol>

<h2 id="label-Description">Description</h2>

<p>Yet another puppet module configuring zookeeper …</p>

<p>Unique with this module are two features making zookeeper configuration
usually very painful. First, all zookeeper nodes need a unique ID to be
given. This module provide a custom fact which calculates a suitable ID for
every node. Second, all zookeeper nodes need to get the list of all nodes
belonging to its ensamble. This module enables autoconfiguration by
exporting node definitions of every node and building the server list for
zookeeper by collecting those exported node definitions. Utilizing both
features will automate zookeeper configuration by taking away the most
painful parts and eliminate the node ID and the list of servers from your
puppet manifests and hiera.</p>

<h2 id="label-Setup">Setup</h2>

<h3 id="label-Setup+Requirements">Setup Requirements</h3>

<p>It is presumed that zookeeper packages are available on your system via
regular package management. This module won&#39;t configure any package
management repositories.</p>

<p>Pluginsync needs to be enabled on your puppet deployment in order to get
the custom fact working.</p>

<p>Stored config needs to be enabled on your puppetmaster infrastructure in
order to get autoconfiguration feature working. Also, it is strongly
recommended to use PuppetDB and consider it as a critical part of your
configuration management system. Be aware, that manipulation, inconsistency
and data loss from your PuppetDB may cause this module to disrupt your
zookeeper clusters.</p>

<h3 id="label-Beginning+with+zookeeperd">Beginning with zookeeperd</h3>

<p>Install the module and its dependencies to your environment. Include the
module to your manifests. You may utilize hiera to hold configuration
parameter. The module carries most of its default values using hiera in
module, which also serve as an example.</p>

<h2 id="label-Usage">Usage</h2>

<p>To create a zookeeper cluster, the easies way is, to include the module to
your manifest, enable autoconfiguration and set an ensamble name on all
nodes of the cluster.</p>

<pre class="code ruby"><code class="ruby">class{ zookeeperd:
  ensamble          =&gt; &#39;Awesamly easy way to your zookeeper cluster&#39;,
  enable_autoconfig =&gt; true,
}
````

The above example will install zookeeper to all nodes this manifest applies to and configure all instances having the same ensamble name to one cluster. Note, that puppet needs at least two runs to get the configuration ready: the first run will export the node definitions, the second will collect all nodes.

If you don&#39;t trust your PuppetDB, or does not want stored configs on your PupppetMaster, you may add pass the list of nodes to the module through nodes parameter.</code></pre>

<p>puppet class{ zookeeperd:  myid =&gt; $id_of_this_node,  nodes =&gt; { 
&#39;first&#39; =&gt; {  nodeid =&gt; 1,  nodename =&gt;
&#39;first.zk.example.org&#39;,  },  &#39;second&#39; =&gt; {  nodeid =&gt;
2,  nodename =&gt; &#39;first.zk.example.org&#39;,  }  } } ““</p>

<h3 id="label-Using+zookeeperd+fact">Using zookeeperd fact</h3>

<p>The module provides a custom fact which calculates a unique ID for all
nodes. This fact is available
<code>$facts['zookeeperd'][&#39;myid&#39;]</code>. The myid parameter of
the module defaults to this value. The value is calculated from the IP
address (<code>$facts['networking'][&#39;ip]</code>) of the node by
converting it to a 32 bit integer.</p>

<p>Zookeeper documentation, however, states myid must between 1..255, the
software itself is treating this as unsigned long, and it is not used for
any logic nor arithmetic.</p>

<h2 id="label-Reference">Reference</h2>

<p>The module code is documented with puppet-strings. Visit <a
href="https://rtib.github.io/puppet-zookeeperd">rtib.github.io/puppet-zookeeperd</a>/
to access detailed code documentation.</p>

<h2 id="label-Limitations">Limitations</h2>

<p>This is where you list OS compatibility, version compatibility, etc. If
there are Known Issues, you might want to include them under their own
heading here.</p>

<h2 id="label-Development">Development</h2>

<p>Feature requests, bug reports are welcome, pull requests are awesome.</p>

<h2 id="label-Donate">Donate</h2>

<p>If you like this project feel free to support via Bitcoin <a
href="bitcoin:14aHsE36fPdgc2X4envRUVH7WpRPSyf4TH?label=donate%3A%20PuppetForge%20trepasi%20zookeeperd"><img
src="donate.png"></a></p>

<h2 id="label-Release+Notes-2FContributors-2FEtc.+Optional">Release Notes/Contributors/Etc. <strong>Optional</strong></h2>

<p>If you aren&#39;t using changelog, put your release notes here (though you
should consider using changelog). You can also add any additional sections
you feel are necessary or important to include here. Please use the
<code>##</code> header.</p>
</div></div>

      <div id="footer">
  Generated on Sat Sep 30 00:53:08 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>